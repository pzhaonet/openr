---
title: '我把青春献给你：排版 (1)'
author: 赵鹏
date: '2017-11-21'
slug: latex-and-me-1
summary: "四个月来，《学 R》这本书，一直排不出理想的模样。"
tags:
  - R
  - LaTeX
  - bookdown
  - markdown
bibliography: [zhaor.bib]
categories: []
banner: img/banners/logo-openr.png
---

1

2017 年快要过去了。如果剩下这四十天不出什么幺蛾子的话，我今年的最蠢事情排行榜，基本是板上钉钉。名列榜首的，就是过早给《学 R》一书大肆宣传。跟罗永浩当年头一回卖锤子手机一样一样的，还没量产，就先吹牛，结果吹破了，打了自己的脸。


![](http://5b0988e595225.cdn.sohucs.com/images/20170715/d6a28e43a55b48128265e4029fb4e6c2.gif)



其实，这本书早在今年 6 月就写完了，7 月做了最后一次修改。当时书号已经批了，封面也有了模样，我以为马上就能印出来了，于是告诉了我能告诉的每一个朋友。朋友们都很讲义气，把白花花的银子拍在桌上，就等着付钱买了。当了教授的老同学说：放心，到时候我送给我的学生人手一本！



谁知道，一晃四个多月过去了，书还没出来。我的前期宣传算是白费了。让人欣慰的是，直到现在，仍然有铁杆粉丝惦记着我，时不时发来鼓励的短信：“喂，你那书烂尾了吧？啊哈哈哈哈\~\~\~\~”



谢谢。



那么，四个月里，这书干嘛去了？



在排版。



《学 R》这本书，一直排不出理想的模样。



四个月是在反反复复修改排版里度过的。一直拖到上周，我们仍然看不到任何排版成功的迹象。2017 年所剩无几的耐心消耗殆尽，一咬牙一跺脚，我们决定壮士断腕。合作作者 Y 从出版社讨来排版文件，并且自己花钱购买了专业软件，自己排；我同时用 \(\LaTeX\) 排，齐头并进。谁先排好就用谁的。我们谁都不想再拖，再拖就真的要吐血了。



当做出这个决定的第二天，Y 看到我用 \(\LaTeX\) 做出的 pdf 书稿小样得到了印刷厂的认可，就放下了手里的专业软件，决定不干了：“\(\LaTeX\) 真厉害，有空我学一下......”



我立马拦住：“最好别去学。这个坑太大。一入 \(\LaTeX\)，坑深似海。”



2

出版社负责录入和排版的工作，简称“录排”。



这四个月来，录排可谓兢兢业业，全心全力为《学 R》排版。可惜，辛苦不一定有回报，排出的书稿，一直有层出不穷的问题。



比如说，丢失公式和特殊字符。原稿里的诸如 *R*^2^， $\pi$  等都莫名其妙消失了。



比如说，字体。原稿里的代码都是用等宽字体表示的，录排之后都成了跟正文一样的字体。



比如说，标点符号。原稿里的所有标点符号，包括代码里的逗号、引号、括号、冒号，都变成了中文标点符号。加上非等宽字体，书里的代码惨不忍睹。



最要命的是，原稿里的很多空格也都不翼而飞。比如录排稿：


![](/img/xuer1.jpg)

是不是一头雾水？实际上原稿是：


![](/img/xuer2.jpg)


每次从录排稿里挑问题，都恨不得把一双近视眼珠子抠出来，再拿着放大镜逐字逐句看。后来，索性放弃了很多想法。比如说，原先代码是彩色的，得知需要录排逐个字符手动修改，算了不要了；原先打算增加个小贴士目录，得知需要排完页码手动添加，算了不要了；原先打算给常用函数做个索引，方便读者从书里找示例，看样子也得手动做，算了不要了......



即便如此，每次的排版仍然会出现奇奇怪怪的问题。如此往返三次，《学 R》这本书我已经读得想呕吐了。



我百思不得其解：这到底是怎么回事？



3



来回折磨了四个月。终于， Y 试用了一下录排用的排版软件—— Adobe InDesign，俗称 ID，是国内出版业主流的专业排版软件。



Y 立刻对我说：“我明白问题出在哪里了！”



原来，录排是把我们提交的原稿，转成了 txt 文本文件；书里的插图，全部转成了 tif 图片。然后，把这些素材导入 ID，然后手动按照原稿 pdf 的样子做调整。



这正是录排一贯的工作流程。



这个流程，对文学类书籍没有问题。一篇小说，重要的是内容，不是格式；只要把文字分好段，就不会有大错。



然而，这个流程用在《学 R》 这本书上，就是个灾难。因为这本书，内容和格式，都很重要。



然而，这一点，录排不知道。



然而，我们不知道录排不知道。



然而，录排不知道我们不知道录排不知道。



四个月的大好青春，就是这样搭进去的。



对此我感到抱歉，让录排白白花了那么多时间和精力，我的吹毛求疵一定让录排很受折磨。同时我也感到遗憾，如果重来一次，这个坑恐怕仍然绕不开。



4，



好在我们及时止损了。



上周，我们从头做起，不仅四个月来积攒的问题一扫而空，而且彩色代码的格式保住了，索引也作出来了。\(\LaTeX\) 在这里显示了无与伦比的强大力量。以致于 Y 饶有兴趣地说：“\(\LaTeX\) 真厉害，有空我学一下......”



我立马拦住：“最好别去学。这个坑太大。一入 \(\LaTeX\)，坑深似海。”

如果你以为本文是为 \(\LaTeX\) 做广告，呵呵，那你就错了。为啥？下回再说。
